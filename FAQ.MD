# FAQ

* **[Настройки](#настройки)**
	1. [Расписание](#1-расписание)
	2. [Первый полный запуск](#2-первый-полный-запуск)
	3. [Загрузка частями](#3-загрузка-частями)

* **[Проблемы с запуском](#проблемы-с-запуском)**
	1. [Ошибка "Already running"](#1-ошибка-already-running)
	2. [Без видимых причин обрывается работа плагина](#2-без-видимых-причин-обрывается-работа-плагина)


## Настройки

### 1. Расписание

Рекомендуется настроить полный импорт товаров: не чаще 1 раз в день.

Обновление остатков: не чаще 1 раза в час.

Рекомендуется настроить расписание на время наименьшей нагрузки на сайт (обычно в ночное время)

### 2. Первый полный запуск

Перед основной загрузкой, рекомендуется выполнить пробный запуск на одной категории с небольшим количеством товаров. Это позволит оценить текущие настройки плагина.

Первый запуск (полный импорт товаров), может занимать до 10 часов.

Для ускорения работы плагина, во время последующих запусков некоторые атрибуты уже созданных товаров не обновляются. Например картинки, можно принудительно включить в настройках `Включить обновление фото`

### 3. Загрузка частями

Иногда требуется грузить не все сразу, а небольшими порциями.

Для это поставьте `Лимит товаров` например 5000 - за один запуск грузить 5000 позиций

В настройках хостинга можно изменить команду на `0/10 0-7 * * * /usr/local/bin/wp oasis_import run --path=...`

Как это работает:
 - в промежутке с 00:00 до 07:00 каждые 10 минут команда на запущен импорта товаров
 - в плагине есть защита от повторных запусков. Если предыдущий процесс еще не завершен, новый будет сразу остановлен
 - допустим плагин завершил полный импорт за 4 запуска в 05:00. Последующие команды на запуск будут сразу завершаться, т.к. полный импорт товаров ограничен раз в день

## Проблемы с запуском

### 1. Ошибка "Already running"
Возможные причины:

* Возможно предыдущий процесс еще не завершил работу

	Решение:
	* `Already running` - сообщение, защита плагина от одновременного запуска нескольких процессов. Необходимо дождаться завершения предыдущего процесса

* По умолчанию настройка импорта ограничена один раз в день

	Решение:
	* Вы можете отключить это ограничение в настройках плагина, `Не ограничивать обновление`

* Во время работы плагин создает файл `/uploads/oasiscatalog-importer/start.lock`, нет доступа к файлу

	Решение:
	* проверить права на папку и файл

* Плагин запускается через панель хостинга, пользователь отличается от пользователя web-сервера

	Решение:
	* проверить права пользователя. В ручную через консоль можно запускать например так `sudo -u www-data /usr/local/bin/wp oasis_import ...`


### 2. Без видимых причин обрывается работа плагина
Возможные причины:

* В некоторых случаях, хостинг может принудительно завершать работу долгих процессов

	Решение:
	* настроить загрузку частями, подробнее [Загрузка частями](#3-загрузка-частями)